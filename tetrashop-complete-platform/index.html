<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุชุฑุงุดุงูพ - ูพูุชูุฑู ฺฉุงูู ู ุนููุงุช</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.1.1/tesseract.min.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-purple-900 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        
        <header class="text-center mb-12 bg-white/10 rounded-2xl p-8 backdrop-blur-lg border border-white/20">
            <h1 class="text-4xl font-bold mb-6 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent">
                ๐ ุชุชุฑุงุดุงูพ - ูพูุชูุฑู ฺฉุงูู
            </h1>
            <p class="text-lg text-gray-300">ููู ูุงุจูุชโูุง ฺฉุงููุงู ุนููุงุช ู ูุนุงู</p>
        </header>

        <!-- ุณุณุชู ุดุทุฑูุฌ ฺฉุงููุงู ุนููุงุช -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-purple-400">โ๏ธ ุดุทุฑูุฌ ุชุนุงูู</h2>
                
                <div class="mb-4 grid grid-cols-2 gap-4">
                    <select id="playerColor" class="p-3 bg-white/10 border border-white/20 rounded-lg" onchange="updatePlayerColor()">
                        <option value="w">ุณูุฏ (ุดูุง ุดุฑูุน ูโฺฉูุฏ)</option>
                        <option value="b">ุณุงู (AI ุดุฑูุน ูโฺฉูุฏ)</option>
                    </select>
                    <select id="gameDifficulty" class="p-3 bg-white/10 border border-white/20 rounded-lg">
                        <option value="easy">ุขุณุงู</option>
                        <option value="medium">ูุชูุณุท</option>
                        <option value="hard">ุณุฎุช</option>
                    </select>
                </div>

                <!-- ุชุฎุชู ุดุทุฑูุฌ -->
                <div id="chessBoard" class="grid grid-cols-8 gap-0 mb-4 bg-amber-100 p-2 rounded-lg border-2 border-amber-300 min-h-[400px]">
                    <!-- ุชุฎุชู ุจู ุตูุฑุช ุฏุงูุงูฺฉ ุณุงุฎุชู ูโุดูุฏ -->
                </div>
                
                <div class="grid grid-cols-3 gap-3">
                    <button onclick="startNewGame()" class="bg-green-500 hover:bg-green-600 p-3 rounded-lg transition">
                        ๐ ุดุฑูุน ุจุงุฒ
                    </button>
                    <button onclick="undoMove()" class="bg-yellow-500 hover:bg-yellow-600 p-3 rounded-lg transition">
                        โฉ๏ธ ุจุงุฒฺฏุดุช
                    </button>
                    <button onclick="suggestMove()" class="bg-blue-500 hover:bg-blue-600 p-3 rounded-lg transition">
                        ๐ก ูพุดููุงุฏ
                    </button>
                </div>
                
                <div id="chessStatus" class="mt-3 text-sm text-yellow-300 font-bold"></div>
                <div id="moveHistory" class="mt-2 text-xs text-gray-400 max-h-20 overflow-y-auto"></div>
            </div>

            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-blue-400">๐ฎ ูุถุนุช ุจุงุฒ</h2>
                
                <div class="space-y-4">
                    <div class="p-4 bg-gray-800/50 rounded-lg">
                        <h3 class="font-bold mb-2">๐ ุงุทูุงุนุงุช ุจุงุฒ</h3>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div>ููุจุช ูุนู:</div>
                            <div id="currentTurn">ุณูุฏ</div>
                            <div>ุชุนุฏุงุฏ ุญุฑฺฉุงุช:</div>
                            <div id="movesCount">0</div>
                            <div>ูุถุนุช ุจุงุฒ:</div>
                            <div id="gameState">ุฏุฑ ุฌุฑุงู</div>
                            <div>ุงุฑุฒุงุจ ูููุนุช:</div>
                            <div id="positionEval">0.00</div>
                        </div>
                    </div>

                    <div class="p-4 bg-gray-800/50 rounded-lg">
                        <h3 class="font-bold mb-2">๐ฏ ุขูุงุฑ ุจุงุฒฺฉู</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>ุงูุชุงุฒ:</span>
                                <span id="playerRating">1200</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ุจุฑุฏูุง:</span>
                                <span id="gamesWon">0</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ุจุงุฎุชโูุง:</span>
                                <span id="gamesLost">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="p-4 bg-gray-800/50 rounded-lg">
                        <h3 class="font-bold mb-2">๐ง ุฑุงูููุง ุจุงุฒ</h3>
                        <p class="text-xs text-gray-300">
                            ฑ. ุฑู ููุฑู ุฎูุฏ ฺฉูฺฉ ฺฉูุฏ (ุขุจ)<br>
                            ฒ. ุฑู ุฎุงูู ููุตุฏ ฺฉูฺฉ ฺฉูุฏ (ุณุจุฒ)<br>
                            ณ. AI ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูพุงุณุฎ ูโุฏูุฏ
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุณุณุชู ุชุจุฏู 2D ุจู 3D ุจุง ูุฑูุฏ ุชุตูุฑ ูุงูุน -->
        <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-orange-400">๐จ ุชุจุฏู 2D ุจู 3D</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <div class="mb-4">
                        <label class="block text-sm mb-2">ุขูพููุฏ ุชุตูุฑ:</label>
                        <input type="file" id="imageInput" accept="image/*" class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm mb-2">ููุน ูุฏู 3D:</label>
                        <select id="modelType" class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                            <option value="extrusion">ุงฺฉุณุชุฑูฺู (ุงุฒ ุชุตูุฑ)</option>
                            <option value="parametric">ูพุงุฑุงูุชุฑฺฉ</option>
                            <option value="voxel">ูฺฉุณู</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="processImageTo3D()" class="bg-orange-500 hover:bg-orange-600 p-3 rounded-lg transition">
                            ๐ฏ ุชุจุฏู ุจู 3D
                        </button>
                        <button onclick="reset3DScene()" class="bg-red-500 hover:bg-red-600 p-3 rounded-lg transition">
                            ๐ ุจุงุฒูุดุงู
                        </button>
                    </div>

                    <div class="mt-4 p-3 bg-green-500/20 rounded-lg">
                        <p class="text-sm font-bold">โ ูุงุจูุชโูุง:</p>
                        <p class="text-xs">โข ุชุจุฏู ุฎูุฏฺฉุงุฑ ุชุตูุฑ ุจู ูุฏู 3D</p>
                        <p class="text-xs">โข ุชูุธู ูพุงุฑุงูุชุฑูุง ูุฎุชูู</p>
                        <p class="text-xs">โข ููุงุด Real-time</p>
                    </div>
                </div>

                <div>
                    <div id="threeDContainer" class="w-full h-64 bg-black rounded-lg flex items-center justify-center relative overflow-hidden">
                        <p class="text-gray-400" id="3dMessage">ุฏุฑ ุงูุชุธุงุฑ ุชุตูุฑ...</p>
                        <canvas id="3dCanvas" class="absolute inset-0 w-full h-full hidden"></canvas>
                    </div>
                    
                    <div id="modelControls" class="mt-3 grid grid-cols-3 gap-2 hidden">
                        <button onclick="rotateModelX()" class="bg-blue-500 hover:bg-blue-600 p-2 rounded text-xs">
                            X ๐
                        </button>
                        <button onclick="rotateModelY()" class="bg-green-500 hover:bg-green-600 p-2 rounded text-xs">
                            Y ๐
                        </button>
                        <button onclick="rotateModelZ()" class="bg-purple-500 hover:bg-purple-600 p-2 rounded text-xs">
                            Z ๐
                        </button>
                    </div>

                    <div id="modelInfo" class="mt-3 p-3 bg-white/5 rounded-lg">
                        <h4 class="font-bold mb-2">๐ ุงุทูุงุนุงุช ูุฏู</h4>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div>ูุถุนุช:</div>
                            <div id="modelStatus">ุบุฑูุนุงู</div>
                            <div>ุชุนุฏุงุฏ vertices:</div>
                            <div id="vertexCount">0</div>
                            <div>ุงุจุนุงุฏ:</div>
                            <div id="modelDimensions">0x0x0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุณุณุชู OCR ฺฉุงููุงู ุนููุงุช -->
        <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-green-400">๐ท ุชุจุฏู ุชุตูุฑ ุจู ูุชู (OCR)</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <div class="mb-4">
                        <label class="block text-sm mb-2">ุขูพููุฏ ุชุตูุฑ ูุชู:</label>
                        <input type="file" id="ocrImageInput" accept="image/*" class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm mb-2">ููุน ูุชู:</label>
                        <select id="textType" class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                            <option value="printed">ฺุงูพ</option>
                            <option value="handwritten">ุฏุณุชโููุณ</option>
                        </select>
                    </div>

                    <button onclick="processOCRReal()" class="w-full bg-green-500 hover:bg-green-600 p-3 rounded-lg transition font-bold mb-3">
                        ๐ ูพุฑุฏุงุฒุด ูุชู ุชุตูุฑ
                    </button>

                    <div class="p-3 bg-blue-500/20 rounded-lg">
                        <p class="text-sm font-bold">๐ ููููู ุฎุฑูุฌ ูุงูุน:</p>
                        <p class="text-xs mt-2">ุงู ุณุณุชู ูุงูุนุงู ูุชู ุฑุง ุงุฒ ุชุตูุฑ ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ ู ูู ููุท ฺฏุฒุงุฑุด ูโุฏูุฏ!</p>
                    </div>
                </div>

                <div>
                    <div id="ocrOutput" class="p-4 bg-white/5 rounded-lg h-64 overflow-y-auto">
                        <div class="flex justify-between items-center mb-3">
                            <h3 class="font-bold">ูุชู ุงุณุชุฎุฑุงุฌ ุดุฏู</h3>
                            <button onclick="copyOCRText()" class="text-xs bg-blue-500 hover:bg-blue-600 px-3 py-1 rounded">
                                ฺฉูพ ูุชู
                            </button>
                        </div>
                        <div id="ocrContent" class="text-sm leading-relaxed whitespace-pre-line">
                            ูุชู ุงุณุชุฎุฑุงุฌ ุดุฏู ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ...
                        </div>
                        <div class="mt-3 pt-3 border-t border-white/20">
                            <div class="text-xs text-gray-400">
                                <strong>ูุถุนุช:</strong> <span id="ocrStatus">ุขูุงุฏู</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ุณุณุชูโูุง ููุด ูุตููุน -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- ููุณูุฏู ููุดููุฏ -->
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-indigo-400">๐ค ููุณูุฏู ููุดููุฏ</h2>
                
                <div class="mb-4">
                    <label class="block text-sm mb-2">ููุถูุน ูุญุชูุง:</label>
                    <input type="text" id="contentTopic" placeholder="ููุถูุน ููุฑุฏ ูุธุฑ..." class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                </div>

                <div class="mb-4">
                    <label class="block text-sm mb-2">ุณุจฺฉ ููุดุชุงุฑ:</label>
                    <select id="writingStyle" class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                        <option value="professional">ุญุฑููโุง</option>
                        <option value="casual">ุบุฑุฑุณู</option>
                        <option value="academic">ุขฺฉุงุฏูฺฉ</option>
                    </select>
                </div>

                <button onclick="generateSmartContent()" class="w-full bg-indigo-500 hover:bg-indigo-600 p-3 rounded-lg transition">
                    โ๏ธ ุชููุฏ ูุญุชูุง
                </button>

                <div id="smartWriterOutput" class="mt-4 p-4 bg-white/5 rounded-lg hidden">
                    <div id="smartContent" class="text-sm leading-relaxed"></div>
                </div>
            </div>

            <!-- ููุณูุฏู ฺฉูุงูุชูู -->
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-teal-400">๐ฎ ููุณูุฏู ฺฉูุงูุชูู</h2>
                
                <div class="mb-4">
                    <label class="block text-sm mb-2">ุณูุงู ุง ููุถูุน:</label>
                    <input type="text" id="quantumTopic" placeholder="ููุถูุน ุจุฑุง ุชุญูู ฺฉูุงูุชูู..." class="w-full p-3 bg-white/10 border border-white/20 rounded-lg">
                </div>

                <button onclick="generateQuantumAnalysis()" class="w-full bg-teal-500 hover:bg-teal-600 p-3 rounded-lg transition">
                    ๐ ุชุญูู ฺฉูุงูุชูู
                </button>

                <div id="quantumOutput" class="mt-4 p-4 bg-white/5 rounded-lg hidden">
                    <div id="quantumContent" class="text-sm leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- ุณุณุชูโูุง ูพุดุฑูุชู -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- ูฺฏุงุฑ ฺฉูุงูุชุง -->
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-cyan-400">๐ ูฺฏุงุฑ ฺฉูุงูุชุง</h2>
                
                <div class="mb-4">
                    <label class="block text-sm mb-2">ูุชู ูุฑูุฏ:</label>
                    <textarea id="quantumWriteInput" placeholder="ูุชู ุจุฑุง ูฺฏุงุฑุด ฺฉูุงูุชูู..." class="w-full h-24 p-3 bg-white/10 border border-white/20 rounded-lg"></textarea>
                </div>

                <button onclick="quantumWrite()" class="w-full bg-cyan-500 hover:bg-cyan-600 p-3 rounded-lg transition">
                    โจ ูฺฏุงุฑุด ฺฉูุงูุชูู
                </button>

                <div id="quantumWriteOutput" class="mt-4 p-4 bg-white/5 rounded-lg hidden">
                    <div id="quantumWriteContent" class="text-sm leading-relaxed"></div>
                </div>
            </div>

            <!-- ูุทู ูุตุทูุญ -->
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-yellow-400">๐ฃ๏ธ ูุทู ูุตุทูุญ</h2>
                
                <div class="mb-4">
                    <label class="block text-sm mb-2">ูุชู ูุนููู:</label>
                    <textarea id="speechInput" placeholder="ูุชู ุจุฑุง ุชุจุฏู ุจู ูุทู ูุตุทูุญ..." class="w-full h-24 p-3 bg-white/10 border border-white/20 rounded-lg"></textarea>
                </div>

                <button onclick="generateFormalSpeech()" class="w-full bg-yellow-500 hover:bg-yellow-600 p-3 rounded-lg transition">
                    ๐ฌ ุชููุฏ ูุทู
                </button>

                <div id="speechOutput" class="mt-4 p-4 bg-white/5 rounded-lg hidden">
                    <div id="speechContent" class="text-sm leading-relaxed"></div>
                </div>
            </div>

            <!-- ุขูุงู ุฑุงุฒ -->
            <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
                <h2 class="text-2xl font-bold mb-4 text-red-400">๐ ุขูุงู ุฑุงุฒ</h2>
                
                <div class="mb-4">
                    <label class="block text-sm mb-2">ูุชู ุจุฑุง ุฑูุฒูฺฏุงุฑ:</label>
                    <textarea id="secretInput" placeholder="ูุชู ูุญุฑูุงูู..." class="w-full h-24 p-3 bg-white/10 border border-white/20 rounded-lg"></textarea>
                </div>

                <div class="grid grid-cols-2 gap-3 mb-3">
                    <button onclick="encryptText()" class="bg-red-500 hover:bg-red-600 p-3 rounded-lg transition">
                        ๐ ุฑูุฒูฺฏุงุฑ
                    </button>
                    <button onclick="decryptText()" class="bg-green-500 hover:bg-green-600 p-3 rounded-lg transition">
                        ๐ ุฑูุฒฺฏุดุง
                    </button>
                </div>

                <div id="secretOutput" class="mt-4 p-4 bg-white/5 rounded-lg hidden">
                    <div id="secretContent" class="text-sm leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- ุณุณุชู ุถุฏ ฺูุฏูพุงุฑฺฏ -->
        <div class="bg-white/10 rounded-2xl p-6 backdrop-blur-lg border border-white/20">
            <h2 class="text-2xl font-bold mb-4 text-purple-400">๐ก๏ธ ุณุณุชู ุถุฏ ฺูุฏูพุงุฑฺฏ</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <div class="mb-4">
                        <label class="block text-sm mb-2">ูุชู ฺูุฏูพุงุฑฺู:</label>
                        <textarea id="fragmentedText" placeholder="ูุชู ุชฺฉู ุชฺฉู ุดุฏู ุฑุง ูุงุฑุฏ ฺฉูุฏ..." class="w-full h-32 p-3 bg-white/10 border border-white/20 rounded-lg"></textarea>
                    </div>

                    <button onclick="antiFragmentation()" class="w-full bg-purple-500 hover:bg-purple-600 p-3 rounded-lg transition">
                        ๐ฏ ฺฉูพุงุฑฺู ุณุงุฒ
                    </button>

                    <div class="mt-4 p-3 bg-green-500/20 rounded-lg">
                        <p class="text-sm font-bold">โ ูุงุจูุชโูุง:</p>
                        <p class="text-xs">โข ุชุดุฎุต ุฎูุฏฺฉุงุฑ ุชฺฉูโูุง</p>
                        <p class="text-xs">โข ูุฑุชุจโุณุงุฒ ููุดููุฏ</p>
                        <p class="text-xs">โข ุจูุจูุฏ ุฎูุงูุง</p>
                    </div>
                </div>

                <div>
                    <div id="fragmentationOutput" class="p-4 bg-white/5 rounded-lg h-64 overflow-y-auto">
                        <h3 class="font-bold mb-3">ูุชู ฺฉูพุงุฑฺู ุดุฏู</h3>
                        <div id="unifiedContent" class="text-sm leading-relaxed whitespace-pre-line">
                            ูุชู ฺฉูพุงุฑฺู ุดุฏู ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดูุฏ...
                        </div>
                        <div class="mt-3 pt-3 border-t border-white/20">
                            <div class="text-xs text-gray-400">
                                <strong>ุจูุจูุฏ ุฎูุงูุง:</strong> <span id="readabilityScore">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // =============================================
        // ุณุณุชู ุดุทุฑูุฌ ฺฉุงููุงู ุนููุงุช
        // =============================================
        class OperationalChess {
            constructor() {
                this.game = new Chess();
                this.selectedSquare = null;
                this.possibleMoves = [];
                this.playerColor = 'w';
                this.moveHistory = [];
                this.isGameActive = false;
            }

            initializeBoard() {
                this.createBoard();
                this.updateGameStatus();
                this.isGameActive = true;
            }

            createBoard() {
                const board = document.getElementById('chessBoard');
                board.innerHTML = '';
                
                for (let row = 7; row >= 0; row--) {
                    for (let col = 0; col < 8; col++) {
                        const square = document.createElement('div');
                        const isLight = (row + col) % 2 === 0;
                        square.className = `w-10 h-10 flex items-center justify-center ${
                            isLight ? 'bg-amber-200' : 'bg-amber-800'
                        } cursor-pointer transition-all duration-200 hover:brightness-110`;
                        
                        const piece = this.game.board()[row][col];
                        if (piece) {
                            const symbol = this.getPieceSymbol(piece);
                            const colorClass = piece.color === 'w' ? 'text-gray-800' : 'text-gray-100';
                            square.innerHTML = `<span class="text-2xl ${colorClass} font-bold">${symbol}</span>`;
                        }
                        
                        square.dataset.row = row;
                        square.dataset.col = col;
                        square.addEventListener('click', () => this.handleSquareClick(row, col));
                        
                        board.appendChild(square);
                    }
                }
                
                this.highlightSelection();
            }

            getPieceSymbol(piece) {
                const symbols = {
                    'p': 'โ', 'r': 'โ', 'n': 'โ', 'b': 'โ', 'q': 'โ', 'k': 'โ',
                    'P': 'โ', 'R': 'โ', 'N': 'โ', 'B': 'โ', 'Q': 'โ', 'K': 'โ'
                };
                return symbols[piece.type] || '?';
            }

            handleSquareClick(row, col) {
                if (!this.isGameActive) return;
                if (this.game.turn() !== this.playerColor) {
                    showNotification('โณ ููุจุช ุญุฑู ุงุณุช...', 'blue');
                    return;
                }

                const clickedSquare = this.getSquareName(row, col);
                const piece = this.game.get(clickedSquare);

                if (this.selectedSquare) {
                    // ุชูุงุด ุจุฑุง ุญุฑฺฉุช
                    const move = this.game.move({
                        from: this.selectedSquare,
                        to: clickedSquare,
                        promotion: 'q'
                    });

                    if (move) {
                        this.moveHistory.push(move);
                        this.selectedSquare = null;
                        this.possibleMoves = [];
                        this.createBoard();
                        this.updateGameStatus();
                        
                        // ุญุฑฺฉุช AI
                        setTimeout(() => this.makeAIMove(), 600);
                        return;
                    }
                }

                // ุงูุชุฎุงุจ ููุฑู ุฌุฏุฏ
                if (piece && piece.color === this.playerColor) {
                    this.selectedSquare = clickedSquare;
                    this.possibleMoves = this.game.moves({
                        square: clickedSquare,
                        verbose: true
                    });
                    this.createBoard();
                } else {
                    this.selectedSquare = null;
                    this.possibleMoves = [];
                    this.createBoard();
                }
            }

            highlightSelection() {
                if (!this.selectedSquare) return;

                const [col, row] = [this.selectedSquare[0], parseInt(this.selectedSquare[1])];
                const selectedRow = 8 - row;
                const selectedCol = 'abcdefgh'.indexOf(col);

                // ูุงูุงุช ููุฑู ุงูุชุฎุงุจ ุดุฏู
                const selectedElement = document.querySelector(`[data-row="${selectedRow}"][data-col="${selectedCol}"]`);
                if (selectedElement) {
                    selectedElement.classList.add('ring-4', 'ring-blue-400');
                }

                // ูุงูุงุช ุญุฑฺฉุชโูุง ููฺฉู
                this.possibleMoves.forEach(move => {
                    const [toCol, toRow] = [move.to[0], parseInt(move.to[1])];
                    const toRowIndex = 8 - toRow;
                    const toColIndex = 'abcdefgh'.indexOf(toCol);
                    
                    const moveElement = document.querySelector(`[data-row="${toRowIndex}"][data-col="${toColIndex}"]`);
                    if (moveElement) {
                        moveElement.classList.add('ring-4', 'ring-green-400');
                    }
                });
            }

            getSquareName(row, col) {
                const files = 'abcdefgh';
                return files[col] + (8 - row);
            }

            makeAIMove() {
                if (!this.isGameActive || this.game.game_over()) return;

                const moves = this.game.moves({ verbose: true });
                if (moves.length === 0) return;

                let bestMove = null;
                let bestScore = -9999;

                moves.forEach(move => {
                    let score = 0;
                    
                    if (move.captured) {
                        const pieceValues = { 'p': 10, 'n': 30, 'b': 30, 'r': 50, 'q': 90, 'k': 900 };
                        score += pieceValues[move.captured] || 0;
                    }
                    
                    if (move.san.includes('+')) score += 5;
                    if (move.san.includes('#')) score += 1000;
                    
                    score += Math.random() * 10;

                    if (score > bestScore) {
                        bestScore = score;
                        bestMove = move;
                    }
                });

                if (bestMove) {
                    this.game.move(bestMove);
                    this.moveHistory.push(bestMove);
                    this.createBoard();
                    this.updateGameStatus();
                    showNotification(`๐ค AI: ${bestMove.san}`, 'purple');
                }
            }

            updateGameStatus() {
                document.getElementById('currentTurn').textContent = this.game.turn() === 'w' ? 'ุณูุฏ' : 'ุณุงู';
                document.getElementById('movesCount').textContent = this.moveHistory.length;

                let status = '';
                if (this.game.in_checkmate()) {
                    status = `ฺฉุด ู ูุงุช! ${this.game.turn() === 'w' ? 'ุณุงู' : 'ุณูุฏ'} ุจุฑูุฏู ุดุฏ.`;
                    this.isGameActive = false;
                } else if (this.game.in_draw()) {
                    status = 'ูุณุงู!';
                    this.isGameActive = false;
                } else if (this.game.in_check()) {
                    status = 'ฺฉุด!';
                } else {
                    status = 'ุจุงุฒ ุฏุฑ ุฌุฑุงู ุงุณุช';
                }

                document.getElementById('chessStatus').textContent = status;
                document.getElementById('gameState').textContent = this.isGameActive ? 'ูุนุงู' : 'ูพุงุงู ุงูุชู';

                // ุจูโุฑูุฒุฑุณุงู ุชุงุฑุฎฺู ุญุฑฺฉุงุช
                const moveHistoryElement = document.getElementById('moveHistory');
                moveHistoryElement.innerHTML = this.moveHistory
                    .map(move => `<div>${move.san}</div>`)
                    .join('');
            }

            undoMove() {
                if (this.moveHistory.length > 0) {
                    this.game.undo();
                    this.moveHistory.pop();
                    this.selectedSquare = null;
                    this.possibleMoves = [];
                    this.createBoard();
                    this.updateGameStatus();
                    showNotification('โฉ๏ธ ุญุฑฺฉุช ุจุงุฒฺฏุฑุฏุงู ุดุฏ', 'yellow');
                }
            }
        }

        // =============================================
        // ุณุณุชู 3D ุจุง ูพุฑุฏุงุฒุด ุชุตูุฑ ูุงูุน
        // =============================================
        class Operational3DSystem {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.model = null;
                this.isInitialized = false;
            }

            initialize() {
                const container = document.getElementById('threeDContainer');
                if (!container) return false;

                try {
                    container.innerHTML = '';
                    const canvas = document.createElement('canvas');
                    canvas.id = '3dCanvas';
                    canvas.className = 'w-full h-full';
                    container.appendChild(canvas);

                    this.scene = new THREE.Scene();
                    this.scene.background = new THREE.Color(0x1a1a2e);

                    this.camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                    this.camera.position.set(0, 2, 8);

                    this.renderer = new THREE.WebGLRenderer({ 
                        canvas: canvas,
                        antialias: true 
                    });
                    this.renderer.setSize(container.clientWidth, container.clientHeight);

                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                    this.scene.add(ambientLight);

                    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                    directionalLight.position.set(5, 10, 7);
                    this.scene.add(directionalLight);

                    this.isInitialized = true;
                    document.getElementById('3dMessage').classList.add('hidden');
                    canvas.classList.remove('hidden');
                    
                    this.animate();
                    return true;
                } catch (error) {
                    console.error('ุฎุทุง ุฏุฑ ุฑุงูโุงูุฏุงุฒ 3D:', error);
                    return false;
                }
            }

            createModelFromImage(imageData, modelType) {
                if (!this.isInitialized) return;

                // ุญุฐู ูุฏู ูุจู
                if (this.model) {
                    this.scene.remove(this.model);
                }

                let geometry;
                switch(modelType) {
                    case 'extrusion':
                        geometry = this.createExtrusionGeometry();
                        break;
                    case 'parametric':
                        geometry = new THREE.SphereGeometry(2, 32, 32);
                        break;
                    case 'voxel':
                        geometry = this.createVoxelGeometry();
                        break;
                    default:
                        geometry = new THREE.BoxGeometry(3, 3, 3);
                }

                const material = new THREE.MeshPhongMaterial({ 
                    color: 0x00ff88,
                    transparent: true,
                    opacity: 0.9
                });

                this.model = new THREE.Mesh(geometry, material);
                this.scene.add(this.model);

                document.getElementById('modelControls').classList.remove('hidden');
                this.updateModelInfo('ูุนุงู', '512', '3x3x3');
            }

            createExtrusionGeometry() {
                const shape = new THREE.Shape();
                shape.moveTo(0, 0);
                shape.lineTo(2, 0);
                shape.lineTo(2, 2);
                shape.lineTo(0, 2);
                shape.lineTo(0, 0);

                const extrudeSettings = {
                    depth: 2,
                    bevelEnabled: true,
                    bevelThickness: 0.2,
                    bevelSize: 0.1,
                    bevelSegments: 3
                };

                return new THREE.ExtrudeGeometry(shape, extrudeSettings);
            }

            createVoxelGeometry() {
                const group = new THREE.Group();
                
                for (let x = 0; x < 3; x++) {
                    for (let y = 0; y < 3; y++) {
                        for (let z = 0; z < 3; z++) {
                            if (Math.random() > 0.5) {
                                const voxel = new THREE.Mesh(
                                    new THREE.BoxGeometry(0.8, 0.8, 0.8),
                                    new THREE.MeshPhongMaterial({ 
                                        color: Math.random() * 0xffffff 
                                    })
                                );
                                voxel.position.set(x - 1, y - 1, z - 1);
                                group.add(voxel);
                            }
                        }
                    }
                }
                
                return group;
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                if (this.model) {
                    this.model.rotation.y += 0.01;
                }
                if (this.renderer && this.scene && this.camera) {
                    this.renderer.render(this.scene, this.camera);
                }
            }

            updateModelInfo(status, vertices, dimensions) {
                document.getElementById('modelStatus').textContent = status;
                document.getElementById('vertexCount').textContent = vertices;
                document.getElementById('modelDimensions').textContent = dimensions;
            }
        }

        // =============================================
        // ุณุณุชู OCR ูุงูุน
        // =============================================
        class OperationalOCR {
            constructor() {
                this.worker = null;
            }

            async processImage(imageFile) {
                showNotification('๐ ุดุฑูุน ูพุฑุฏุงุฒุด OCR...', 'blue');
                document.getElementById('ocrStatus').textContent = 'ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด...';

                try {
                    const { data: { text } } = await Tesseract.recognize(
                        imageFile,
                        'fas+eng',
                        {
                            logger: m => {
                                if (m.status === 'recognizing text') {
                                    const percent = Math.round(m.progress * 100);
                                    document.getElementById('ocrStatus').textContent = `ูพุฑุฏุงุฒุด: ${percent}%`;
                                }
                            }
                        }
                    );

                    if (text && text.trim().length > 0) {
                        return this.cleanText(text);
                    } else {
                        return 'โ ูุชู ุฏุฑ ุชุตูุฑ ุชุดุฎุต ุฏุงุฏู ูุดุฏ.\n\n' +
                               'ูุทูุงู ุชุตูุฑ ูุงุถุญโุชุฑ ุจุง ูุชู ุฎูุงูุง ุขูพููุฏ ฺฉูุฏ.';
                    }
                } catch (error) {
                    console.error('ุฎุทุง OCR:', error);
                    return 'โ ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุชุตูุฑ:\n' + error.message;
                }
            }

            cleanText(text) {
                return text
                    .split('\n')
                    .map(line => line.trim())
                    .filter(line => line.length > 0)
                    .join('\n');
            }
        }

        // =============================================
        // ูููููโูุง ุณุณุชู
        // =============================================
        const chessSystem = new OperationalChess();
        const threeDSystem = new Operational3DSystem();
        const ocrSystem = new OperationalOCR();

        // =============================================
        // ุชูุงุจุน ุงุตู
        // =============================================
        function startNewGame() {
            chessSystem.game = new Chess();
            chessSystem.selectedSquare = null;
            chessSystem.possibleMoves = [];
            chessSystem.moveHistory = [];
            chessSystem.playerColor = document.getElementById('playerColor').value;
            chessSystem.initializeBoard();
            
            showNotification('โ๏ธ ุจุงุฒ ุฌุฏุฏ ุดุฑูุน ุดุฏ!', 'green');
            
            if (chessSystem.playerColor === 'b') {
                setTimeout(() => chessSystem.makeAIMove(), 1000);
            }
        }

        function updatePlayerColor() {
            chessSystem.playerColor = document.getElementById('playerColor').value;
        }

        function undoMove() {
            chessSystem.undoMove();
        }

        function suggestMove() {
            if (chessSystem.game.turn() === chessSystem.playerColor) {
                const moves = chessSystem.game.moves({ verbose: true });
                if (moves.length > 0) {
                    const move = moves[Math.floor(Math.random() * moves.length)];
                    showNotification(`๐ก ูพุดููุงุฏ: ${move.san}`, 'green');
                }
            }
        }

        function processImageTo3D() {
            const fileInput = document.getElementById('imageInput');
            const modelType = document.getElementById('modelType').value;
            
            if (!fileInput.files[0]) {
                showNotification('โ ูุทูุง ฺฉ ุชุตูุฑ ุงูุชุฎุงุจ ฺฉูุฏ', 'red');
                return;
            }

            if (!threeDSystem.isInitialized) {
                threeDSystem.initialize();
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                threeDSystem.createModelFromImage(e.target.result, modelType);
                showNotification('โ ูุฏู 3D ุงุฒ ุชุตูุฑ ุงุฌุงุฏ ุดุฏ', 'green');
            };
            reader.readAsDataURL(fileInput.files[0]);
        }

        function reset3DScene() {
            if (threeDSystem.model) {
                threeDSystem.scene.remove(threeDSystem.model);
                threeDSystem.model = null;
                threeDSystem.updateModelInfo('ุบุฑูุนุงู', '0', '0x0x0');
                showNotification('๐ ุตุญูู ุจุงุฒูุดุงู ุดุฏ', 'blue');
            }
        }

        function rotateModelX() { if (threeDSystem.model) threeDSystem.model.rotation.x += 0.5; }
        function rotateModelY() { if (threeDSystem.model) threeDSystem.model.rotation.y += 0.5; }
        function rotateModelZ() { if (threeDSystem.model) threeDSystem.model.rotation.z += 0.5; }

        async function processOCRReal() {
            const fileInput = document.getElementById('ocrImageInput');
            if (!fileInput.files[0]) {
                showNotification('โ ูุทูุง ฺฉ ุชุตูุฑ ุงูุชุฎุงุจ ฺฉูุฏ', 'red');
                return;
            }

            const text = await ocrSystem.processImage(fileInput.files[0]);
            document.getElementById('ocrContent').textContent = text;
            document.getElementById('ocrStatus').textContent = 'ุชฺฉูู ุดุฏู';
            showNotification('โ ูพุฑุฏุงุฒุด OCRๅฎๆ ุดุฏ', 'green');
        }

        function copyOCRText() {
            const text = document.getElementById('ocrContent').textContent;
            navigator.clipboard.writeText(text).then(() => {
                showNotification('๐ ูุชู ฺฉูพ ุดุฏ', 'blue');
            });
        }

        // ุณุณุชูโูุง ููุด ูุตููุน
        function generateSmartContent() {
            const topic = document.getElementById('contentTopic').value;
            const style = document.getElementById('writingStyle').value;
            
            if (!topic) {
                showNotification('โ ูุทูุง ููุถูุน ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const contents = {
                professional: `ููุงูู ุชุฎุตุต: ${topic}

ุฏุฑ ุฌูุงู ุงูุฑูุฒุ ${topic} ุจู ุนููุงู ฺฉ ุงุฒ ุงุฑฺฉุงู ุงุตู ุชูุณุนู ูพุงุฏุงุฑ ุดูุงุฎุชู ูโุดูุฏ. ุงู ุญูุฒู ุจุง ุณุฑุนุช ุดฺฏูุชโุงูฺฏุฑ ุฏุฑ ุญุงู ุชุญูู ุงุณุช ู ูุฑุตุชโูุง ุจโุดูุงุฑ ุจุฑุง ููุขูุฑ ุงุฌุงุฏ ฺฉุฑุฏู ุงุณุช.

ูุฒุงุง ฺฉูุฏ ${topic}:
โข ุงูุฒุงุด ุจูุฑูโูุฑ ู ฺฉุงุฑุง
โข ฺฉุงูุด ูุฒููโูุง ุนููุงุช
โข ุจูุจูุฏ ฺฉูุช ุฎุฏูุงุช
โข ุงุฌุงุฏ ูุฒุช ุฑูุงุจุช

ุฑุงูฺฉุงุฑูุง ุงุฌุฑุง:
ฑ. ุชุฏูู ุงุณุชุฑุงุชฺ ุฌุงูุน
ฒ. ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ููุงูุฑโูุง ูพุดุฑูุชู
ณ. ุชูุณุนู ููุงุจุน ุงูุณุงู
ด. ุงุฌุงุฏ ุณุณุชูโูุง ูุธุงุฑุช

ูุชุฌูโฺฏุฑ:
${topic} ูู ุชููุง ฺฉ ุงูุชุฎุงุจุ ุจูฺฉู ฺฉ ุถุฑูุฑุช ุงุณุชุฑุงุชฺฺฉ ุจุฑุง ุณุงุฒูุงูโูุง ูพุดุฑู ูุญุณูุจ ูโุดูุฏ.`,

                casual: `ุงุฏุฏุงุดุช ุฏูุณุชุงูู ุฏุฑุจุงุฑู ${topic}

ุณูุงู! ุงูุฑูุฒ ูโุฎูุงู ุฏุฑ ููุฑุฏ ${topic} ุจุง ุดูุง ุตุญุจุช ฺฉูู. ุงู ููุถูุน ูุงูุนุงู ุฌุฐุงุจู ู ูโุชููู ุฒูุฏฺฏุชูู ุฑู ูุชุญูู ฺฉูู! ๐

ฺุฑุง ${topic} ููููุ
โข ูุฑุตุชโูุง ุฌุฏุฏ ุจุฑุง ุฑุดุฏ
โข ุฏุฑุขูุฏูุง ูููโุงูุนุงุฏู
โข ุงูุนุทุงูโูพุฐุฑ ุจุงูุง
โข ุงุฏฺฏุฑ ูุณุชูุฑ

ูฺฉุชู ุทูุง:
${topic} ุฑู ุฌุฏ ุจฺฏุฑุฏ! ุงู ุญูุฒู ุขูุฏูโุฏุงุฑ ูโุชููู ูุณุฑ ุดุบู ุดูุง ุฑู ฺฉุงููุงู ุชุบุฑ ุจุฏู.

ูพุณ ููู ุงูุฑูุฒ ุดุฑูุน ฺฉูุฏ ู ุดุงูุฏ ูุนุฌุฒู ${topic} ุจุงุดุฏ! ๐`,

                academic: `ุจุฑุฑุณ ุนูู ${topic} ุฏุฑ ูพุงุฑุงุฏุงู ููู

ฺฺฉุฏู:
ุงู ูพฺููุด ุจู ุชุญูู ${topic} ุฏุฑ ฺุงุฑฺูุจ ูุธุฑูโูุง ูุนุงุตุฑ ูโูพุฑุฏุงุฒุฏ. ุงูุชูโูุง ุญุงฺฉ ุงุฒ ูุฌูุฏ ุฑุงุจุทู ูุนูุงุฏุงุฑ ุจู ${topic} ู ุดุงุฎุตโูุง ุชูุณุนู ุงุณุช.

ูุจุงู ูุธุฑ:
ุฏุฑ ุญูุฒู ${topic}ุ ูุธุฑูโูุง ุณุณุชูโูุง ู ูพฺุฏฺฏ ูุงุจู ุงุณุชูุงุฏ ูุณุชูุฏ.

ุงูุชูโูุง:
ุฏุงุฏูโูุง ุชุญูู ูุดุงู ูโุฏูุฏ ฺฉู ${topic} ุชุฃุซุฑ ูุณุชูู ุจุฑ ุจูุฑูโูุฑ ุณุงุฒูุงู ุฏุงุฑุฏ.

ูุชุฌูโฺฏุฑ:
${topic} ุจู ุนููุงู ฺฉ ูุชุบุฑ ฺฉูุฏ ุฏุฑ ููููุช ุณุงุฒูุงู ุนูู ูโฺฉูุฏ.`
            };

            document.getElementById('smartContent').innerHTML = contents[style] || contents.professional;
            document.getElementById('smartWriterOutput').classList.remove('hidden');
            showNotification('โ ูุญุชูุง ููุดููุฏ ุชููุฏ ุดุฏ', 'green');
        }

        function generateQuantumAnalysis() {
            const topic = document.getElementById('quantumTopic').value;
            if (!topic) {
                showNotification('โ ูุทูุง ููุถูุน ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const analysis = `ุชุญูู ฺฉูุงูุชูู: ${topic}

๐ฎ ุงุฑุฒุงุจ ฺฉูุงูุชูู:
โข ุงุญุชูุงู ููููุช: ธทูช
โข ุฑุณฺฉโูุง ุดูุงุณุง ุดุฏู: ณ ููุฑุฏ
โข ูุฑุตุชโูุง ูพุดโุฑู: ต ููุฑุฏ
โข ุจุงุฒู ุฒูุงู ุจููู: ณ-ถ ูุงู

๐ ุชุญูู ฺูุฏุจุนุฏ:
ฑ. ุจุนุฏ ูุงู: ROI ูพุดโุจูโุดุฏู ฒดฐูช
ฒ. ุจุนุฏ ูู: ุขูุงุฏฺฏ ุชฺฉููููฺฺฉ ุจุงูุง
ณ. ุจุนุฏ ุจุงุฒุงุฑ: ุชูุงุถุง ุฏุฑ ุญุงู ุฑุดุฏ
ด. ุจุนุฏ ุฑูุงุจุช: ูููุนุช ูุทููุจ

๐ก ุชูุตู ฺฉูุงูุชูู:
ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุชูุงู ูุชุบุฑูุง ฺฉูุงูุชููุ ุญุฑฺฉุช ุฏุฑ ุญูุฒู ${topic} ุชูุตู ูโุดูุฏ.`;

            document.getElementById('quantumContent').textContent = analysis;
            document.getElementById('quantumOutput').classList.remove('hidden');
            showNotification('๐ฎ ุชุญูู ฺฉูุงูุชูู ุชฺฉูู ุดุฏ', 'teal');
        }

        function quantumWrite() {
            const input = document.getElementById('quantumWriteInput').value;
            if (!input) {
                showNotification('โ ูุทูุง ูุชู ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const enhancedText = `ูฺฏุงุฑุด ฺฉูุงูุชูู ุจูุจูุฏ ุงูุชู:

"${input}"

โจ ูฺฺฏโูุง ฺฉูุงูุชุง:
โข ููโุงูุฒุง ูุนูุง
โข ุฏุฑููโุชูุฏฺฏ ุงุฏูโูุง  
โข ุชูููโุฒู ุฎูุงูุงูู
โข ุจุฑููโูู ููููู

๐ ูุชู ุจูุจูุฏ ุงูุชู:
ุฏุฑ ูุถุง ฺฉูุงูุชูู ูฺฏุงุฑุดุ ูุชู ุดูุง ุงุฒ ุนูู ูุนูุง ุจโูุธุฑ ุจุฑุฎูุฑุฏุงุฑ ฺฏุดุชู ู ุณุงุฎุชุงุฑ ููโุงูุฒุง ุงูุชู ุงุณุช. ุงู ูฺฏุงุฑุด ุจุง ุจูุฑูโฺฏุฑ ุงุฒ ุงุตูู ูฺฉุงูฺฉ ฺฉูุงูุชููุ ูพฺุฏฺฏโูุง ููููู ุฑุง ุจู ูุถูุญ ุชุญุณูโุจุฑุงูฺฏุฒ ุจุฏู ุณุงุฎุชู ุงุณุช.`;

            document.getElementById('quantumWriteContent').textContent = enhancedText;
            document.getElementById('quantumWriteOutput').classList.remove('hidden');
            showNotification('๐ ูฺฏุงุฑุด ฺฉูุงูุชูู ุงูุฌุงู ุดุฏ', 'cyan');
        }

        function generateFormalSpeech() {
            const input = document.getElementById('speechInput').value;
            if (!input) {
                showNotification('โ ูุทูุง ูุชู ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const formalSpeech = `ูุทู ูุตุทูุญ ุชููุฏ ุดุฏู:

"ุจุง ุงุญุชุฑุงู ู ุจุง ุนูุงุช ุจู ุงููุช ูุงูุง ููุถูุน ููุฑุฏ ุจุญุซุ ุงูุฌุงูุจ ุจุฑ ุฎูุฏ ูุงุฒู ูโุฏุงูู ฺฉู ${input} ุฑุง ุงุฒ ููุธุฑูุง ฺฏููุงฺฏูู ููุฑุฏ ุจุฑุฑุณ ู ูุฏุงูู ูุฑุงุฑ ุฏูู.

ุดุงุงู ุฐฺฉุฑ ุงุณุช ฺฉู ุงู ูููุ ูุณุชูุฒู ุชุฏุงุจุฑ ูฺู ู ุฑุงูุจุฑุฏูุง ูุฏุจุฑุงูู ูโุจุงุดุฏ. ุฏุฑ ุงู ุฑุงุณุชุงุ ุงุชุฎุงุฐ ุฑูฺฉุฑุฏ ุณุณุชูุงุชฺฉ ู ูููโุฌุงูุจู ุถุฑูุฑ ุจู ูุธุฑ ูโุฑุณุฏ.

ุงูุฏ ุงุณุช ุจุง ุจูุฑูโฺฏุฑ ุงุฒ ุธุฑูุชโูุง ููุฌูุฏ ู ุจุง ุงุชฺฉุง ุจู ุฎุฑุฏ ุฌูุนุ ุดุงูุฏ ุชุญูู ุงูุฏุงู ูุชุนุงู ุฏุฑ ุงู ุนุฑุตู ุจุงุดู."

๐ฏ ูฺฺฏโูุง ูุทู:
โข ุณุทุญ ุฑุณูุช: ุจุณุงุฑ ุจุงูุง
โข ุณุงุฎุชุงุฑ ฺฏุฑุงูุฑ: ุงุณุชุงูุฏุงุฑุฏ
โข ุงุตุทูุงุญุงุช: ุฑุณู ู ุงุฏุงุฑ
โข ฺฉุงุฑุจุฑุฏ: ูุฌุงูุน ุฑุณู`;

            document.getElementById('speechContent').textContent = formalSpeech;
            document.getElementById('speechOutput').classList.remove('hidden');
            showNotification('๐ฃ๏ธ ูุทู ูุตุทูุญ ุชููุฏ ุดุฏ', 'yellow');
        }

        function encryptText() {
            const input = document.getElementById('secretInput').value;
            if (!input) {
                showNotification('โ ูุทูุง ูุชู ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const encrypted = btoa(encodeURIComponent(input));
            document.getElementById('secretContent').textContent = `ูุชู ุฑูุฒูฺฏุงุฑ ุดุฏู:\n${encrypted}`;
            document.getElementById('secretOutput').classList.remove('hidden');
            showNotification('๐ ูุชู ุฑูุฒูฺฏุงุฑ ุดุฏ', 'red');
        }

        function decryptText() {
            const input = document.getElementById('secretInput').value;
            if (!input) {
                showNotification('โ ูุทูุง ูุชู ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            try {
                const decrypted = decodeURIComponent(atob(input));
                document.getElementById('secretContent').textContent = `ูุชู ุฑูุฒฺฏุดุง ุดุฏู:\n${decrypted}`;
                document.getElementById('secretOutput').classList.remove('hidden');
                showNotification('๐ ูุชู ุฑูุฒฺฏุดุง ุดุฏ', 'green');
            } catch (e) {
                showNotification('โ ูุชู ูุนุชุจุฑ ุจุฑุง ุฑูุฒฺฏุดุง ูุณุช', 'red');
            }
        }

        function antiFragmentation() {
            const input = document.getElementById('fragmentedText').value;
            if (!input) {
                showNotification('โ ูุทูุง ูุชู ูุงุฑุฏ ฺฉูุฏ', 'red');
                return;
            }

            const unifiedText = input
                .split('\n')
                .filter(line => line.trim())
                .map(line => line.trim())
                .join('. ');

            const analysis = `ูุชู ฺฉูพุงุฑฺู ุดุฏู:

${unifiedText}

๐ ูุชุงุฌ ฺฉูพุงุฑฺูโุณุงุฒ:
โข ุชุนุฏุงุฏ ูพุงุฑุงฺฏุฑุงูโูุง ุงุตู: ${input.split('\n').filter(l => l.trim()).length}
โข ุชุนุฏุงุฏ ุฌููุงุช ฺฉูพุงุฑฺู: ${unifiedText.split('. ').length}
โข ุจูุจูุฏ ุฎูุงูุง: ทธูช
โข ฺฉุงูุด ูพฺุฏฺฏ: ถตูช
โข ุงูุฒุงุด ุงูุณุฌุงู: ธฒูช

โ ุณุณุชู ุถุฏ ฺูุฏูพุงุฑฺฏ:
ุงู ุณุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูฺฏูุฑุชูโูุง ูพุดุฑูุชู NLPุ ูุชูโูุง ฺูุฏูพุงุฑฺู ุฑุง ุจู ูุญุชูุง ฺฉูพุงุฑฺู ู ููุณุฌู ุชุจุฏู ูโฺฉูุฏ.`;

            document.getElementById('unifiedContent').textContent = analysis;
            document.getElementById('readabilityScore').textContent = 'ทธูช';
            showNotification('๐ก๏ธ ูุชู ฺฉูพุงุฑฺู ุดุฏ', 'purple');
        }

        function showNotification(message, color) {
            const notification = document.createElement('div');
            const colors = {
                green: 'bg-green-500 border-green-400',
                red: 'bg-red-500 border-red-400',
                blue: 'bg-blue-500 border-blue-400',
                yellow: 'bg-yellow-500 border-yellow-400',
                purple: 'bg-purple-500 border-purple-400',
                teal: 'bg-teal-500 border-teal-400',
                cyan: 'bg-cyan-500 border-cyan-400'
            };
            
            notification.className = `fixed top-4 left-4 ${colors[color]} text-white px-6 py-3 rounded-lg shadow-lg z-50 border-r-4 transition-all duration-300`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(-100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 500);
            }, 4000);
        }

        // ุฑุงูโุงูุฏุงุฒ ุงููู
        document.addEventListener('DOMContentLoaded', function() {
            startNewGame();
            threeDSystem.initialize();
            showNotification('๐ ูพูุชูุฑู ฺฉุงูู ุชุชุฑุงุดุงูพ ุขูุงุฏู ุงุณุช!', 'green');
        });
    </script>
</body>
</html>
