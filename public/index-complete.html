<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØªØ±Ø§Ø´Ø§Ù¾ - Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÚ˜Ù‡</title>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #48bb78;
            --danger: #f56565;
            --warning: #ed8936;
            --info: #4299e1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            direction: rtl;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .logo {
            font-size: 4em;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .title {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #718096;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card-full {
            grid-column: 1 / -1;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .status-item {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
        }
        
        .status-active {
            background: #f0fff4;
            border-color: var(--success);
            color: #22543d;
        }
        
        .status-inactive {
            background: #fed7d7;
            border-color: var(--danger);
            color: #742a2a;
        }
        
        .btn-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary { background: var(--primary); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-warning { background: var(--warning); color: white; }
        .btn-info { background: var(--info); color: white; }
        .btn-secondary { background: #e2e8f0; color: #4a5568; }
        
        .feature-list {
            list-style: none;
            margin: 15px 0;
        }
        
        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        
        .feature-list li:before {
            content: "âœ…";
            margin-left: 10px;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .tech-tag {
            background: #edf2f7;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            color: #4a5568;
        }
        
        .live-preview {
            background: #2d3748;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: white;
            font-family: monospace;
        }
        
        .cache-display {
            max-height: 200px;
            overflow-y: auto;
            background: #f7fafc;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ù‡Ø¯Ø± Ø§ØµÙ„ÛŒ -->
        <div class="header">
            <div class="logo">ğŸ›ï¸</div>
            <h1 class="title">ØªØªØ±Ø§Ø´Ø§Ù¾ - Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÚ˜Ù‡</h1>
            <p class="subtitle">Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„</p>
            
            <div class="status-grid">
                <div class="status-item status-active">
                    <div>ğŸŒ Ø³Ø±ÙˆØ± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯</div>
                    <div>ÙØ¹Ø§Ù„ - Ù¾ÙˆØ±Øª 8000</div>
                </div>
                <div class="status-item status-active">
                    <div>ğŸ”§ Ø³Ø±ÙˆØ± Ù¾Ø±ÙˆÚ©Ø³ÛŒ</div>
                    <div>ÙØ¹Ø§Ù„ - Ù¾ÙˆØ±Øª 3003</div>
                </div>
                <div class="status-item status-active">
                    <div>ğŸ’¾ Ø³ÛŒØ³ØªÙ… Ú©Ø´</div>
                    <div>ÙØ¹Ø§Ù„ Ùˆ Ø¢Ù…Ø§Ø¯Ù‡</div>
                </div>
                <div class="status-item status-active">
                    <div>ğŸš€ ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ</div>
                    <div>Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§</div>
                </div>
            </div>
        </div>

        <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ -->
        <div class="dashboard">
            <!-- Ø¨Ø®Ø´ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡ -->
            <div class="card">
                <h3>ğŸ¯ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ù¾Ø±ÙˆÚ˜Ù‡</p>
                
                <div class="btn-grid">
                    <a href="./index.html" class="btn btn-primary">ğŸ  ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
                    <a href="./index-test.html" class="btn btn-success">ğŸ§ª Ù†Ø³Ø®Ù‡ ØªØ³ØªÛŒ</a>
                    <a href="./index-advanced-fixed.html" class="btn btn-warning">âš¡ Ù†Ø³Ø®Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡</a>
                    <a href="#" onclick="showProjectStructure()" class="btn btn-info">ğŸ“ Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</a>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ø³ÛŒØ³ØªÙ… Ú©Ø´ -->
            <div class="card">
                <h3>ğŸ’¾ Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h3>
                <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§ÙØ¸Ù‡ Ù…ÙˆÙ‚Øª Ùˆ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯</p>
                
                <div class="btn-grid">
                    <button class="btn btn-success" onclick="testCacheSystem()">ğŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ú©Ø´</button>
                    <button class="btn btn-danger" onclick="clearAllCache()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´</button>
                    <button class="btn btn-info" onclick="showCacheStats()">ğŸ“Š Ø¢Ù…Ø§Ø± Ú©Ø´</button>
                </div>
                
                <div id="cacheStats" class="cache-display">
                    Ø¢Ù…Ø§Ø± Ú©Ø´ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ -->
            <div class="card card-full">
                <h3>ğŸš€ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                
                <div class="feature-list">
                    <li>Ø³ÛŒØ³ØªÙ… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ API Ø§Ø®ØªØµØ§ØµÛŒ</li>
                    <li>Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ù…Ø­Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ù…Ø´Ú©Ù„ CORS</li>
                    <li>Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ TTL Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…</li>
                    <li>Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø­Ù„ÛŒ (LocalStorage)</li>
                    <li>Ø·Ø±Ø§Ø­ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ Ùˆ Ù…Ø¯Ø±Ù†</li>
                    <li>Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ Ùˆ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª</li>
                    <li>Ù‚Ø§Ø¨Ù„ÛŒØª Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø±ÙˆÛŒ Vercel/Netlify</li>
                    <li>Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</li>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ ÙÙ†ÛŒ -->
            <div class="card">
                <h3>ğŸ”§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ†ÛŒ</h3>
                
                <div class="tech-stack">
                    <span class="tech-tag">HTML5</span>
                    <span class="tech-tag">CSS3</span>
                    <span class="tech-tag">JavaScript ES6+</span>
                    <span class="tech-tag">LocalStorage</span>
                    <span class="tech-tag">Node.js</span>
                    <span class="tech-tag">Python HTTP Server</span>
                    <span class="tech-tag">Vercel</span>
                    <span class="tech-tag">Git</span>
                </div>
                
                <div style="margin-top: 15px;">
                    <strong>Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„:</strong>
                    <div style="font-size: 12px; margin-top: 5px;">
                        â€¢ http://localhost:8000<br>
                        â€¢ http://localhost:3003 (Ù¾Ø±ÙˆÚ©Ø³ÛŒ)
                    </div>
                </div>
            </div>

            <!-- Ø¨Ø®Ø´ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡ -->
            <div class="card">
                <h3>ğŸ‘ï¸ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡</h3>
                <p>Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙˆØ¶Ø¹ÛŒØª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø³ÛŒØ³ØªÙ…</p>
                
                <div class="live-preview" id="livePreview">
                    Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...
                </div>
                
                <button class="btn btn-info" onclick="refreshPreview()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</button>
            </div>
        </div>

        <!-- Ø¨Ø®Ø´ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø³Ø±ÛŒØ¹ -->
        <div class="card card-full">
            <h3>âš¡ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø³Ø±ÛŒØ¹ ØªØ±Ù…ÛŒÙ†Ø§Ù„</h3>
            
            <div class="live-preview">
                <div># Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯</div>
                <div>$ python3 -m http.server 8000</div>
                <br>
                <div># Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù¾Ø±ÙˆÚ©Ø³ÛŒ</div>
                <div>$ node simple-proxy.js</div>
                <br>
                <div># Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§</div>
                <div>$ ls -la public/</div>
            </div>
        </div>
    </div>

    <script>
        // Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø´
        const cacheManager = {
            getAll: function() {
                const items = [];
                try {
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key && key.startsWith('search_')) {
                            const itemStr = localStorage.getItem(key);
                            if (itemStr) {
                                const item = JSON.parse(itemStr);
                                if (Date.now() <= item.expiry) {
                                    items.push({
                                        query: key.replace('search_', ''),
                                        timestamp: item.timestamp,
                                        data: item.data
                                    });
                                }
                            }
                        }
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† Ú©Ø´:', error);
                }
                return items;
            },
            
            clearAll: function() {
                try {
                    const keysToRemove = [];
                    for (let i = 0; i < localStorage.length; i++) {
                        const key = localStorage.key(i);
                        if (key && key.startsWith('search_')) {
                            keysToRemove.push(key);
                        }
                    }
                    
                    keysToRemove.forEach(key => {
                        localStorage.removeItem(key);
                    });
                    
                    return keysToRemove.length;
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ø´:', error);
                    return 0;
                }
            },
            
            getStats: function() {
                const items = this.getAll();
                return {
                    total: items.length,
                    items: items.map(item => ({
                        query: item.query,
                        timestamp: item.timestamp,
                        results: item.data?.data?.results?.length || 0
                    }))
                };
            }
        };

        // Ø¹Ù…Ù„Ú©Ø±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
        function testCacheSystem() {
            const testQuery = 'ØªØ³Øª Ø³ÛŒØ³ØªÙ… ' + new Date().toLocaleTimeString('fa-IR');
            const testData = {
                success: true,
                data: {
                    results: [{
                        title: "ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ú©Ø´",
                        content: "Ø§ÛŒÙ† ÛŒÚ© ØªØ³Øª Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ø§Ø³Øª",
                        relevance: 0.95
                    }]
                }
            };
            
            const item = {
                data: testData,
                expiry: Date.now() + (5 * 60 * 1000),
                timestamp: new Date().toLocaleString('fa-IR')
            };
            
            try {
                localStorage.setItem(`search_${testQuery}`, JSON.stringify(item));
                showMessage('âœ… ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯', 'success');
                showCacheStats();
            } catch (error) {
                showMessage('âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ú©Ø´: ' + error.message, 'error');
            }
        }

        function clearAllCache() {
            const clearedCount = cacheManager.clearAll();
            showMessage(`ğŸ—‘ï¸ ${clearedCount} Ø¢ÛŒØªÙ… Ú©Ø´ Ù¾Ø§Ú© Ø´Ø¯`, 'success');
            showCacheStats();
        }

        function showCacheStats() {
            const stats = cacheManager.getStats();
            const cacheStats = document.getElementById('cacheStats');
            
            if (stats.total === 0) {
                cacheStats.innerHTML = '<div style="text-align: center; color: #718096;">Ú©Ø´ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</div>';
            } else {
                cacheStats.innerHTML = stats.items.map(item => `
                    <div style="border-bottom: 1px solid #e2e8f0; padding: 8px 0;">
                        <strong>${item.query}</strong>
                        <div style="font-size: 12px; color: #718096;">
                            ğŸ“… ${item.timestamp} | ğŸ“Š ${item.results} Ù†ØªÛŒØ¬Ù‡
                        </div>
                    </div>
                `).join('');
            }
        }

        function showProjectStructure() {
            const structure = `
ğŸ“¦ tetrashop-master-repo/
â”œâ”€â”€ ğŸ“ public/
â”‚   â”œâ”€â”€ ğŸ  index.html                 # ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
â”‚   â”œâ”€â”€ âš¡ index-advanced-fixed.html  # Ù†Ø³Ø®Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡)
â”‚   â”œâ”€â”€ ğŸ§ª index-test.html           # Ù†Ø³Ø®Ù‡ ØªØ³ØªÛŒ
â”‚   â””â”€â”€ ğŸ”§ simple-proxy.js           # Ø³Ø±ÙˆØ± Ù¾Ø±ÙˆÚ©Ø³ÛŒ
â”œâ”€â”€ ğŸ“ frontend/                     # Ú©Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯
â”œâ”€â”€ âš™ï¸ vercel.json                   # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯ÛŒÙ¾Ù„ÙˆÛŒ
â””â”€â”€ ğŸ“„ package.json                  # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡
            `;
            alert(structure);
        }

        function refreshPreview() {
            const preview = document.getElementById('livePreview');
            const stats = cacheManager.getStats();
            const serverStatus = navigator.onLine ? 'ğŸŸ¢ Ù…ØªØµÙ„' : 'ğŸ”´ Ù‚Ø·Ø¹';
            
            preview.innerHTML = `
ğŸ•’ ${new Date().toLocaleString('fa-IR')}
ğŸ“Š Ú©Ø´: ${stats.total} Ø¢ÛŒØªÙ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
ğŸŒ Ø´Ø¨Ú©Ù‡: ${serverStatus}
ğŸ”§ Ù¾Ø±ÙˆÚ©Ø³ÛŒ: ÙØ¹Ø§Ù„ (Ù¾ÙˆØ±Øª 3003)
ğŸš€ Ø³Ø±ÙˆØ±: ÙØ¹Ø§Ù„ (Ù¾ÙˆØ±Øª 8000)
            `;
        }

        function showMessage(message, type = 'info') {
            alert(message);
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            showCacheStats();
            refreshPreview();
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ø± 30 Ø«Ø§Ù†ÛŒÙ‡
            setInterval(refreshPreview, 30000);
            
            console.log('ğŸ¯ Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯');
        });
    </script>
</body>
</html>
