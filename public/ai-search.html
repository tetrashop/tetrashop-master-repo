<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØªØ±Ø§Ø´Ø§Ù¾ - Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ AI</title>
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #48bb78;
            --danger: #f56565;
            --warning: #ed8936;
            --info: #4299e1;
            --ai: #8b5cf6;
        }
        
        .ai-response {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            border-right: 5px solid #7c3aed;
        }
        
        .ai-thinking {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        
        .parameter-analysis {
            background: #ecfdf5;
            border: 2px solid #10b981;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  ØªØªØ±Ø§Ø´Ø§Ù¾ - Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ AI</h1>
            <div class="ai-response">
                <h3>ğŸ¤– Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¬Ø³ØªØ¬Ùˆ</h3>
                <p>Ø³ÛŒØ³ØªÙ… Ù…Ù† Ù‚Ø§Ø¯Ø± Ø¨Ù‡ ØªÙØ³ÛŒØ± Ù‡ÙˆØ´Ù…Ù†Ø¯Ø§Ù†Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ùˆ ØªÙˆÙ„ÛŒØ¯ Ù†ØªØ§ÛŒØ¬ Ù…Ø¹Ù†Ø§Ø¯Ø§Ø± Ø§Ø³Øª</p>
            </div>
        </div>

        <div class="search-interface">
            <div class="card">
                <h3>ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
                
                <div class="form-group">
                    <label for="aiQuery">Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ:</label>
                    <input type="text" id="aiQuery" class="search-input" 
                           value="Ø±Ø§Ù…ÛŒÙ† Ø§Ø¬Ù„Ø§Ù„" placeholder="Ø¹Ø¨Ø§Ø±Øª Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...">
                </div>

                <div class="form-group">
                    <label for="searchStrategy">Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø¬Ø³ØªØ¬Ùˆ:</label>
                    <select id="searchStrategy" class="combobox">
                        <option value="smart">Ù‡ÙˆØ´Ù…Ù†Ø¯ (ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)</option>
                        <option value="semantic">Ù…Ø¹Ù†Ø§ÛŒÛŒ - ØªÙØ³ÛŒØ± Ù…ÙÙ‡ÙˆÙ…</option>
                        <option value="keyword">Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡ - Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ù‚ÛŒÙ‚</option>
                        <option value="fuzzy">ÙØ§Ø²ÛŒ - Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø´Ø§Ø¨Ù‡</option>
                        <option value="contextual">Ù…ØªÙ†ÛŒ - Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø²Ù…ÛŒÙ†Ù‡</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="performAISearch()">
                    ğŸ§  Ø§Ø¬Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
                </button>

                <div class="parameter-analysis" id="parameterAnalysis">
                    <h4>ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§</h4>
                    <div id="paramStatus">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</div>
                </div>
            </div>

            <div class="card">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('aiResults')">Ù†ØªØ§ÛŒØ¬ Ù‡ÙˆØ´Ù…Ù†Ø¯</div>
                    <div class="tab" onclick="switchTab('rawData')">Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù…</div>
                    <div class="tab" onclick="switchTab('aiInsights')">Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ AI</div>
                </div>

                <div id="aiResults" class="tab-content">
                    <div class="ai-thinking" id="thinkingProcess">
                        <h4>ğŸ¤” ÙØ±Ø¢ÛŒÙ†Ø¯ ØªÙÚ©Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯:</h4>
                        <div id="thinkingSteps"></div>
                    </div>
                    
                    <h3>ğŸ¯ Ù†ØªØ§ÛŒØ¬ ØªÙØ³ÛŒØ± Ø´Ø¯Ù‡</h3>
                    <div id="aiSearchResults" class="results-container">
                        <div class="loading">
                            ğŸ§  Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª...
                        </div>
                    </div>
                </div>

                <div id="rawData" class="tab-content" style="display: none;">
                    <h3>ğŸ“„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù… Ùˆ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§</h3>
                    <div id="rawDataContent" class="results-container">
                        <div class="loading">
                            ğŸ“Š Ø¯Ø± Ø­Ø§Ù„ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù…...
                        </div>
                    </div>
                </div>

                <div id="aiInsights" class="tab-content" style="display: none;">
                    <h3>ğŸ’¡ Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h3>
                    <div id="insightsContent" class="results-container">
                        <div class="loading">
                            ğŸ’­ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆÙ„ÛŒØ¯ Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ğŸ¤– Ù…ÙˆØªÙˆØ± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ØªÙØ³ÛŒØ±Ú¯Ø±
        const AIInterpreter = {
            // ØªØ­Ù„ÛŒÙ„ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ
            analyzeQuery: function(query) {
                const analysis = {
                    originalQuery: query,
                    detectedLanguage: this.detectLanguage(query),
                    queryType: this.classifyQueryType(query),
                    keywords: this.extractKeywords(query),
                    intent: this.determineIntent(query),
                    context: this.deriveContext(query),
                    confidence: 0.85
                };
                
                analysis.confidence = this.calculateConfidence(analysis);
                return analysis;
            },
            
            // ØªØ´Ø®ÛŒØµ Ø²Ø¨Ø§Ù†
            detectLanguage: function(text) {
                const persianRegex = /[\u0600-\u06FF]/;
                return persianRegex.test(text) ? 'fa' : 'en';
            },
            
            // Ø·Ø¨Ù‚Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†ÙˆØ¹ Ø¬Ø³ØªØ¬Ùˆ
            classifyQueryType: function(query) {
                const lowerQuery = query.toLowerCase();
                
                if (/(Ø±Ø§Ù…ÛŒÙ†|Ø§Ø¬Ù„Ø§Ù„|ramin|ejlal)/i.test(lowerQuery)) {
                    return 'person_search';
                } else if (/(ÙØ±ÙˆØ´Ú¯Ø§Ù‡|Ù…Ø­ØµÙˆÙ„|Ú©Ø§Ù„Ø§|shop|product)/i.test(lowerQuery)) {
                    return 'product_search';
                } else if (/(Ù‚ÛŒÙ…Øª|Ù‡Ø²ÛŒÙ†Ù‡|Ø®Ø±ÛŒØ¯|price|cost)/i.test(lowerQuery)) {
                    return 'price_inquiry';
                } else if (/(Ú†Ú¯ÙˆÙ†Ù‡|Ø±ÙˆØ´|Ø¢Ù…ÙˆØ²Ø´|how to|tutorial)/i.test(lowerQuery)) {
                    return 'how_to';
                } else {
                    return 'general_search';
                }
            },
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ
            extractKeywords: function(query) {
                const stopWords = ['Ø¯Ø±', 'Ø¨Ø§', 'Ø¨Ø±Ø§ÛŒ', 'Ø§Ø²', 'Ø¨Ù‡', 'Ú©Ù‡', 'Ø§ÛŒÙ†', 'Ø¢Ù†'];
                const words = query.split(' ').filter(word => 
                    word.length > 2 && !stopWords.includes(word)
                );
                
                return {
                    primary: words[0] || query,
                    secondary: words.slice(1),
                    all: words
                };
            },
            
            // ØªØ´Ø®ÛŒØµ Ù‡Ø¯Ù Ú©Ø§Ø±Ø¨Ø±
            determineIntent: function(query) {
                const analysis = this.classifyQueryType(query);
                const intents = {
                    'person_search': 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÛŒÚ© Ø´Ø®Øµ',
                    'product_search': 'ÛŒØ§ÙØªÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ø±ØªØ¨Ø·',
                    'price_inquiry': 'Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù‚ÛŒÙ…Øª Ùˆ Ù‡Ø²ÛŒÙ†Ù‡',
                    'how_to': 'Ø¯Ø±ÛŒØ§ÙØª Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ùˆ Ø¢Ù…ÙˆØ²Ø´',
                    'general_search': 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª'
                };
                
                return intents[analysis] || 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª';
            },
            
            // Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø²Ù…ÛŒÙ†Ù‡
            deriveContext: function(query) {
                return {
                    domain: 'ecommerce',
                    userType: 'potential_customer',
                    timeContext: 'current',
                    locationContext: 'iran',
                    deviceContext: 'desktop'
                };
            },
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù†
            calculateConfidence: function(analysis) {
                let confidence = 0.7;
                
                if (analysis.keywords.primary.length > 0) confidence += 0.1;
                if (analysis.queryType !== 'general_search') confidence += 0.1;
                if (analysis.detectedLanguage === 'fa') confidence += 0.05;
                
                return Math.min(confidence, 0.95);
            },
            
            // ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ø¯Ù„
            generateEquivalentData: function(analysis) {
                const equivalents = {
                    'Ø±Ø§Ù…ÛŒÙ† Ø§Ø¬Ù„Ø§Ù„': {
                        type: 'person',
                        variations: [
                            'Ramin Ejlal',
                            'Ø±Ø§Ù…ÛŒÙ† Ø§Ø¬Ù„Ø§Ù„',
                            'Ø¢Ù‚Ø§ÛŒ Ø§Ø¬Ù„Ø§Ù„',
                            'Ù…Ø¯ÛŒØ±ÛŒØª ØªØªØ±Ø§Ø´Ø§Ù¾'
                        ],
                        relatedTerms: [
                            'Ù…Ø¯ÛŒØ± ÙØ±ÙˆØ´Ú¯Ø§Ù‡',
                            'ØªÙˆØ³Ø¹Ù‡ Ø¯Ù‡Ù†Ø¯Ù‡',
                            'Ú©Ø§Ø±Ø¢ÙØ±ÛŒÙ†',
                            'Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±'
                        ],
                        context: 'Ù…Ø¯ÛŒØ±ÛŒØª Ùˆ ØªÙˆØ³Ø¹Ù‡ ØªØªØ±Ø§Ø´Ø§Ù¾'
                    }
                };
                
                return equivalents[analysis.originalQuery] || {
                    type: 'general',
                    variations: [analysis.originalQuery],
                    relatedTerms: analysis.keywords.all,
                    context: analysis.intent
                };
            },
            
            // ØªÙˆÙ„ÛŒØ¯ Ù†ØªØ§ÛŒØ¬ Ù‡ÙˆØ´Ù…Ù†Ø¯
            generateSmartResults: function(analysis, equivalentData) {
                const results = [];
                const baseRelevance = 0.8;
                
                // Ù†ØªØ§ÛŒØ¬ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± ØªØ­Ù„ÛŒÙ„
                if (analysis.queryType === 'person_search') {
                    results.push({
                        id: 'person_bio',
                        title: `Ù¾Ø±ÙˆÙØ§ÛŒÙ„: ${analysis.originalQuery}`,
                        content: this.generatePersonBio(analysis.originalQuery),
                        relevance: baseRelevance + 0.15,
                        type: 'profile',
                        source: 'ai_generated',
                        confidence: analysis.confidence
                    });
                    
                    results.push({
                        id: 'related_work',
                        title: `ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ${analysis.originalQuery}`,
                        content: this.generateRelatedWork(analysis.originalQuery),
                        relevance: baseRelevance + 0.1,
                        type: 'activities',
                        source: 'ai_generated',
                        confidence: analysis.confidence - 0.1
                    });
                }
                
                // Ù†ØªØ§ÛŒØ¬ Ø¹Ù…ÙˆÙ…ÛŒ
                results.push({
                    id: 'context_info',
                    title: 'Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²Ù…ÛŒÙ†Ù‡â€ŒØ§ÛŒ',
                    content: this.generateContextInfo(analysis, equivalentData),
                    relevance: baseRelevance,
                    type: 'context',
                    source: 'ai_analysis',
                    confidence: analysis.confidence
                });
                
                return results.sort((a, b) => b.relevance - a.relevance);
            },
            
            // ØªÙˆÙ„ÛŒØ¯ Ø¨ÛŒÙˆÚ¯Ø±Ø§ÙÛŒ
            generatePersonBio: function(name) {
                const bios = {
                    'Ø±Ø§Ù…ÛŒÙ† Ø§Ø¬Ù„Ø§Ù„': `Ø±Ø§Ù…ÛŒÙ† Ø§Ø¬Ù„Ø§Ù„ ÛŒÚ© Ú©Ø§Ø±Ø¢ÙØ±ÛŒÙ† Ùˆ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ø¯Ø± Ø­ÙˆØ²Ù‡ ØªØ¬Ø§Ø±Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© Ø§Ø³Øª. 
                    Ø§Ùˆ Ø¯Ø± ØªÙˆØ³Ø¹Ù‡ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªØ®ØµØµ Ø¯Ø§Ø±Ø¯ Ùˆ Ù¾Ø±ÙˆÚ˜Ù‡ ØªØªØ±Ø§Ø´Ø§Ù¾ Ø±Ø§ 
                    Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.`
                };
                
                return bios[name] || `${name} ÛŒÚ© ÙØ±Ø¯ Ù…ØªØ®ØµØµ Ø¯Ø± Ø­ÙˆØ²Ù‡ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø´Ù…Ø§ Ø§Ø³Øª.`;
            },
            
            // ØªÙˆÙ„ÛŒØ¯ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·
            generateRelatedWork: function(name) {
                return `Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ØŒ ${name} Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± ÙØ¹Ø§Ù„ÛŒØª Ø¯Ø§Ø±Ø¯:
                â€¢ ØªÙˆØ³Ø¹Ù‡ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ùˆ Ù¾Ù„ØªÙØ±Ù…â€ŒÙ‡Ø§ÛŒ ØªØ¬Ø§Ø±Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©
                â€¢ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ÙÙ†Ø§ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
                â€¢ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†
                â€¢ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ Ù…Ø§Ø±Ú©ØªÛŒÙ†Ú¯`;
            },
            
            // ØªÙˆÙ„ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²Ù…ÛŒÙ†Ù‡â€ŒØ§ÛŒ
            generateContextInfo: function(analysis, equivalentData) {
                return `ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø´Ù…Ø§ Ø¨Ù‡ Ø¯Ù†Ø¨Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ "${analysis.originalQuery}" Ù‡Ø³ØªÛŒØ¯.
                
                Ø²Ù…ÛŒÙ†Ù‡ ØªØ´Ø®ÛŒØµ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: ${analysis.intent}
                Ù†ÙˆØ¹ Ø¬Ø³ØªØ¬Ùˆ: ${analysis.queryType}
                Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø§ØµÙ„ÛŒ: ${analysis.keywords.primary}
                
                Ù…Ø¹Ø§Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡: ${equivalentData.variations.join(', ')}`;
            }
        };

        // ğŸ¯ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
        const ParameterManager = {
            // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
            checkAvailableParameters: function() {
                const parameters = {
                    query: document.getElementById('aiQuery').value,
                    strategy: document.getElementById('searchStrategy').value,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    viewport: {
                        width: window.innerWidth,
                        height: window.innerHeight
                    }
                };
                
                return {
                    available: parameters,
                    missing: this.identifyMissingParams(parameters),
                    health: this.calculateParameterHealth(parameters)
                };
            },
            
            // Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…ÙÙ‚ÙˆØ¯
            identifyMissingParams: function(params) {
                const missing = [];
                
                if (!params.query || params.query.trim().length === 0) {
                    missing.push('Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ');
                }
                
                if (!params.strategy) {
                    missing.push('Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø¬Ø³ØªØ¬Ùˆ');
                }
                
                return missing;
            },
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ù„Ø§Ù…Øª Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
            calculateParameterHealth: function(params) {
                let score = 100;
                
                if (!params.query || params.query.trim().length === 0) score -= 40;
                if (params.query && params.query.trim().length < 3) score -= 20;
                if (params.missing && params.missing.length > 0) score -= (params.missing.length * 10);
                
                return {
                    score: Math.max(score, 0),
                    status: score >= 80 ? 'Ø¹Ø§Ù„ÛŒ' : score >= 60 ? 'Ø®ÙˆØ¨' : score >= 40 ? 'Ù…ØªÙˆØ³Ø·' : 'Ø¶Ø¹ÛŒÙ',
                    color: score >= 80 ? 'green' : score >= 60 ? 'orange' : 'red'
                };
            },
            
            // ØªÙˆÙ„ÛŒØ¯ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
            generateAlternativeParams: function(missingParams, currentParams) {
                const alternatives = {};
                
                missingParams.forEach(param => {
                    switch(param) {
                        case 'Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ':
                            alternatives.query = 'Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ø¯Ø± ØªØªØ±Ø§Ø´Ø§Ù¾';
                            break;
                        case 'Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø¬Ø³ØªØ¬Ùˆ':
                            alternatives.strategy = 'smart';
                            break;
                    }
                });
                
                return {
                    ...currentParams,
                    ...alternatives,
                    isEnhanced: true,
                    enhancementReason: 'ØªÙˆÙ„ÛŒØ¯ Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙˆØ³Ø· Ø³ÛŒØ³ØªÙ… Ù‡ÙˆØ´Ù…Ù†Ø¯'
                };
            }
        };

        // ğŸ” Ø¹Ù…Ù„Ú©Ø±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¬Ø³ØªØ¬Ùˆ
        function performAISearch() {
            const query = document.getElementById('aiQuery').value.trim();
            const strategy = document.getElementById('searchStrategy').value;
            
            // Ù†Ù…Ø§ÛŒØ´ ÙØ±Ø¢ÛŒÙ†Ø¯ ØªÙÚ©Ø±
            showThinkingProcess(query, strategy);
            
            // ØªØ­Ù„ÛŒÙ„ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
            const paramAnalysis = ParameterManager.checkAvailableParameters();
            showParameterAnalysis(paramAnalysis);
            
            // Ø§Ú¯Ø± Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù†Ø¯ØŒ ØªÙˆÙ„ÛŒØ¯ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
            let enhancedParams = paramAnalysis.available;
            if (paramAnalysis.missing.length > 0 || paramAnalysis.health.score < 70) {
                enhancedParams = ParameterManager.generateAlternativeParams(
                    paramAnalysis.missing, 
                    paramAnalysis.available
                );
            }
            
            // ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ
            const queryAnalysis = AIInterpreter.analyzeQuery(query);
            const equivalentData = AIInterpreter.generateEquivalentData(queryAnalysis);
            
            // ØªÙˆÙ„ÛŒØ¯ Ù†ØªØ§ÛŒØ¬ Ù‡ÙˆØ´Ù…Ù†Ø¯
            const aiResults = AIInterpreter.generateSmartResults(queryAnalysis, equivalentData);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            displayAIResults(aiResults, queryAnalysis);
            displayRawData(enhancedParams, queryAnalysis, equivalentData);
            displayAIInsights(queryAnalysis, aiResults);
        }
        
        function showThinkingProcess(query, strategy) {
            const thinkingSteps = document.getElementById('thinkingSteps');
            
            const steps = [
                `ğŸ” Ø¯Ø±ÛŒØ§ÙØª Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ: "${query}"`,
                `ğŸ¯ ØªØ­Ù„ÛŒÙ„ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ: ${strategy}`,
                `ğŸ§  ØªØ´Ø®ÛŒØµ Ø²Ø¨Ø§Ù† Ùˆ Ø²Ù…ÛŒÙ†Ù‡`,
                `ğŸ“Š Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ`,
                `ğŸ’­ ØªØ¹ÛŒÛŒÙ† Ù‡Ø¯Ù Ú©Ø§Ø±Ø¨Ø±`,
                `ğŸ”§ ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ø¯Ù„`,
                `ğŸ“ˆ ØªÙˆÙ„ÛŒØ¯ Ù†ØªØ§ÛŒØ¬ Ù‡ÙˆØ´Ù…Ù†Ø¯`,
                `âœ… Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´`
            ];
            
            thinkingSteps.innerHTML = steps.map((step, index) => `
                <div style="margin: 8px 0; padding: 8px; background: rgba(255,255,255,0.3); border-radius: 6px;">
                    ${step}
                </div>
            `).join('');
        }
        
        function showParameterAnalysis(analysis) {
            const paramStatus = document.getElementById('paramStatus');
            const health = analysis.health;
            
            paramStatus.innerHTML = `
                <div style="color: ${health.color}; font-weight: bold;">
                    ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§: ${health.status} (Ø§Ù…ØªÛŒØ§Ø²: ${health.score}/100)
                </div>
                <div style="margin-top: 10px;">
                    <strong>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:</strong><br>
                    â€¢ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ: "${analysis.available.query}"<br>
                    â€¢ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ: ${analysis.available.strategy}<br>
                    â€¢ Ø²Ù…Ø§Ù†: ${new Date(analysis.available.timestamp).toLocaleString('fa-IR')}
                </div>
                ${analysis.missing.length > 0 ? `
                <div style="color: orange; margin-top: 10px;">
                    <strong>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…ÙÙ‚ÙˆØ¯:</strong><br>
                    ${analysis.missing.map(item => `â€¢ ${item}`).join('<br>')}
                </div>
                ` : ''}
            `;
        }
        
        function displayAIResults(results, analysis) {
            const container = document.getElementById('aiSearchResults');
            
            if (results.length === 0) {
                container.innerHTML = `
                    <div class="result-item">
                        <div class="result-title">ğŸ” Ù‡ÛŒÚ† Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>
                        <div class="result-content">
                            Ø³ÛŒØ³ØªÙ… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†ØªÙˆØ§Ù†Ø³Øª Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ "${analysis.originalQuery}" Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯.
                            <br>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯:
                            <ul>
                                <li>Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                                <li>Ø§Ø² Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ "Ù…Ø¹Ù†Ø§ÛŒÛŒ" Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                                <li>Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø±ØªØ¨Ø· Ø±Ø§ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯</li>
                            </ul>
                        </div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = results.map(result => `
                <div class="result-item">
                    <div class="result-header">
                        <div class="result-title">${result.title}</div>
                        <div style="color: ${result.confidence > 0.8 ? '#48bb78' : '#ed8936'}; font-weight: bold;">
                            Ø§Ø·Ù…ÛŒÙ†Ø§Ù†: ${Math.round(result.confidence * 100)}%
                        </div>
                    </div>
                    
                    <div class="result-meta">
                        <span>ğŸ·ï¸ Ù†ÙˆØ¹: ${result.type}</span>
                        <span>ğŸ“¡ Ù…Ù†Ø¨Ø¹: ${result.source}</span>
                        <span>â­ Ù…Ø±ØªØ¨Ø· Ø¨ÙˆØ¯Ù†: ${Math.round(result.relevance * 100)}%</span>
                    </div>
                    
                    <div class="result-content">
                        ${result.content.replace(/\n/g, '<br>')}
                    </div>
                    
                    <div class="result-details">
                        <strong>ğŸ¤– Ù†Ø­ÙˆÙ‡ ØªÙˆÙ„ÛŒØ¯:</strong>
                        <div style="font-size: 0.9em; color: #666;">
                            Ø§ÛŒÙ† Ù†ØªÛŒØ¬Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ùˆ ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ø¯Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡ Ø§Ø³Øª.
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function displayRawData(params, analysis, equivalentData) {
            const container = document.getElementById('rawDataContent');
            
            container.innerHTML = `
                <div class="result-item">
                    <h4>ğŸ“‹ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ</h4>
                    <pre style="background: #f7fafc; padding: 15px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(params, null, 2)}</pre>
                </div>
                
                <div class="result-item">
                    <h4>ğŸ” ØªØ­Ù„ÛŒÙ„ Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ</h4>
                    <pre style="background: #f7fafc; padding: 15px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(analysis, null, 2)}</pre>
                </div>
                
                <div class="result-item">
                    <h4>ğŸ”„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ø¯Ù„ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡</h4>
                    <pre style="background: #f7fafc; padding: 15px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(equivalentData, null, 2)}</pre>
                </div>
            `;
        }
        
        function displayAIInsights(analysis, results) {
            const container = document.getElementById('insightsContent');
            
            const insights = [
                `ğŸ¯ <strong>Ù‡Ø¯Ù Ú©Ø§Ø±Ø¨Ø±:</strong> ${analysis.intent}`,
                `ğŸ” <strong>Ù†ÙˆØ¹ Ø¬Ø³ØªØ¬Ùˆ:</strong> ${analysis.queryType}`,
                `ğŸ’¡ <strong>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡ÙˆØ´Ù…Ù†Ø¯:</strong> ${this.generateAIRecommendation(analysis)}`,
                `ğŸ“ˆ <strong>Ú©Ø§Ø±Ø§ÛŒÛŒ Ø³ÛŒØ³ØªÙ…:</strong> ${results.length} Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ø·Ù…ÛŒÙ†Ø§Ù† ${Math.round(results.reduce((acc, r) => acc + r.confidence, 0) / results.length * 100)}%`,
                `ğŸš€ <strong>Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø¹Ø¯ÛŒ:</strong> ${this.generateImprovementSuggestions(analysis)}`
            ];
            
            container.innerHTML = `
                <div class="result-item">
                    <h4>ğŸ’¡ Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h4>
                    ${insights.map(insight => `
                        <div style="padding: 10px; margin: 8px 0; background: #f0f9ff; border-radius: 8px; border-right: 4px solid #0ea5e9;">
                            ${insight}
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function generateAIRecommendation(analysis) {
            const recommendations = {
                'person_search': 'Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ÙØ±Ø§Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù†Ø§Ù… Ú©Ø§Ù…Ù„ ÛŒØ§ Ø¹Ù†Ø§ÙˆÛŒÙ† Ø´ØºÙ„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯',
                'product_search': 'Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§ØªØŒ Ù†Ø§Ù… Ø¯Ù‚ÛŒÙ‚ Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¢Ù† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯',
                'price_inquiry': 'Ø¨Ø±Ø§ÛŒ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ØŒ Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„ + Ú©Ù„Ù…Ù‡ "Ù‚ÛŒÙ…Øª" Ø±Ø§ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯',
                'general_search': 'Ø¹Ø¨Ø§Ø±Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ù„ÛŒâ€ŒØªØ± ÛŒØ§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± ÙØ±Ù…ÙˆÙ„Ù‡ Ú©Ù†ÛŒØ¯'
            };
            
            return recommendations[analysis.queryType] || 'Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª ÙˆØ§Ø¶Ø­â€ŒØªØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
        }
        
        function generateImprovementSuggestions(analysis) {
            if (analysis.confidence < 0.7) {
                return 'Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ùˆ Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
            }
            return 'Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø­Ø§Ù„Øª Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯';
        }
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).style.display = 'block';
            event.target.classList.add('active');
        }

        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§  Ø³ÛŒØ³ØªÙ… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ AI Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯');
        });
    </script>
</body>
</html>
